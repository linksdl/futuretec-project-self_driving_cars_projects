
<!-- saved from url=(0083)http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/solving.htm -->
<html class="gr__homepages_inf_ed_ac_uk"><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">

</head>
<body bgcolor="#FFFFFF" text="#000000" data-gr-c-s-loaded="true" mycollectionplug="bind">

<img src="./solving_files/smallmar.gif" align="RIGHT">

<center>
<i><font color="#6B238E"><font size="+3">
Solving for 
<br>Perspective Inversion</font></font></i>
<br>

</center>
<img src="./solving_files/halfstripe.gif" width="75%">

<p>


We assume that we have identified a group of points in the image, probably junctions between straight lines, but possibly other control points such as ellipse centres which grouping suggests may correspond to similar model control points. Now we have to solve the <b> perspective-n-point</b> problem; i.e. given a set of <b>n</b> corresponding points what is the pose of the object in 3D space ? Usually <b>n</b> is 3 or 4. ( Less than this gives an infinite number of solutions.) When <b>n</b>=3 there are a maximum of eight possible solutions, of which only four occur in real 3D space in front of the camera. If <b>n</b>=4 and these points are coplanar, there is a unique solution; otherwise for non-coplanar points there are two solutions. We shall deal only with the case of 3 points, illustrated in Figure 6, below. We refer mainly to the article by Fischler and Bolles [<a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/refs.htm">Reference no 1</a>] although this problem has been discussed by many authors.
</p><p>
</p><center>
<img align="BOTTOM" alt="Solving the perspective-3-point problem" src="./solving_files/img15.gif">
<br><strong>Figure 6:</strong>Solving the perspective-3-point problem</center>
<p>
The basic problem is to determine the lencths of the three legs of the tetrahedron formed by <b>A,B,C</b> and the centre of perspective <b>CP</b>. From trigonometry, we can form three equations based on the <i> Cosine rule</i>, 
</p><p>
<img align="BOTTOM" src="./solving_files/img16.gif">
</p><p>
<img align="BOTTOM" src="./solving_files/img17.gif">
</p><p>
<img align="BOTTOM" src="./solving_files/img18.gif">
</p><p>
Making the substitutions 
</p><p>
<a name="equation4">
<img align="BOTTOM" src="./solving_files/img19.gif">
</a></p><p><a name="equation4">
i.e. expressing the distances to points B and C as a constant times
the distance to point A, we obtain

</a></p><p><a name="equation4">
</a><a name="equation5">
<img align="BOTTOM" src="./solving_files/img20.gif">
</a></p><p><a name="equation5">
<img align="BOTTOM" src="./solving_files/img21.gif">
</a></p><p><a name="equation5">
<img align="BOTTOM" src="./solving_files/img22.gif">
</a></p><p><a name="equation5">
It is possible to combine and re-arrange equations 5,6 and 7 to form a quartic equation in <img align="MIDDLE" src="./solving_files/img23.gif">.
</a></p><p><a name="equation5">
</a><a name="quartic">
<img align="BOTTOM" src="./solving_files/img24.gif"></a></p><p><a name="quartic">

</a></p><p><a name="quartic">
where
</a></p><p><a name="quartic">
<img align="BOTTOM" src="./solving_files/img25.gif">
</a></p><p><a name="quartic">
<img align="BOTTOM" src="./solving_files/img26.gif">
</a></p><p><a name="quartic">
<img align="BOTTOM" src="./solving_files/img27.gif">
</a></p><p><a name="quartic">
<img align="BOTTOM" src="./solving_files/img28.gif">
</a></p><p><a name="quartic">
<img align="BOTTOM" src="./solving_files/img29.gif">
</a></p><p><a name="quartic">
and
</a></p><p><a name="quartic">
<img align="BOTTOM" src="./solving_files/img30.gif">
</a></p><p><a name="quartic">
<img align="MIDDLE" src="./solving_files/img31.gif">, <img align="MIDDLE" src="./solving_files/img32.gif"> and <img align="MIDDLE" src="./solving_files/img33.gif"> are known from the rigid model of the object, since we have assumed point correspondence.
For each positive real root of the Equation </a><a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/solving.htm#quartic">8</a> we can then calculate the values of <b>a,b</b> and <b>c</b>, i.e. substituting for <i><b>k<sub>1</sub></b></i>
in Equation 5, below. This is simply a rearrangement of Equation <a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/solving.htm#equation5">5</a> Then <b>b</b> and <b>c</b> are known directly from Equations 16 and 17 ( i.e. Equation <a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/solving.htm#equation4">4</a>). To determine <b>c</b>, we also need to calculate <img align="MIDDLE" src="./solving_files/img35.gif">. There are two possible conditions, given in Equations 18 and 19.
</p><p>
<img align="BOTTOM" src="./solving_files/img36.gif">
</p><p>
<img align="BOTTOM" src="./solving_files/img37.gif">
</p><p>
<img align="BOTTOM" src="./solving_files/img38.gif">
</p><p>
where, either
</p><p>
<img align="BOTTOM" src="./solving_files/img39.gif">
</p><p>
provided the denominator is not equal to zero, or, if this test fails then 
</p><p>
<img align="BOTTOM" src="./solving_files/img40.gif">
</p><p>
As stated this system of equations has a maximum of eight  solutions [See <a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/refs.htm">Reference no 1</a>],
but four of these solutions have negative values of <b>a,b</b> and <b>c</b> - they are behind the camera and are isomorphic to the other four solutions which are in the world in front of the camera.  Figure 7 gives   pictorial example of how these multiple solutions may occur. 
</p><p>
</p><center><img align="BOTTOM" alt=" Multiple solutions to the perspective-3-point problem" src="./solving_files/img41.gif">
<br><strong>Figure 7:</strong> <a name="multiple">&nbsp;</a> Multiple solutions to the perspective-3-point problem</center>

<p>
<img src="./solving_files/grnline.gif" width="100%"></p><p>
</p><center>
<p>
<a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/grouping.htm"><img src="./solving_files/back.gif" align="absmiddle" border="0"></a>
<a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/verify.htm"><img src="./solving_files/forward.gif" align="absmiddle" border="0"></a>
<br>
<small>[  <a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/grouping.htm">Grouping and non-accidental properties</a> | </small>
<small><a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/verify.htm">Verifying the solution</a> ]</small>
</p><p>
<small>Comments to: <a href="mailto:sprice@icbl.hw.ac.uk">Sarah Price</a> at <a href="http://www.icbl.hw.ac.uk/"> ICBL.</a>   
<br></small>
</p></center>





<div id="cntvlive2-is-installed"></div></body></html>